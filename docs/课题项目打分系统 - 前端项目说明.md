# 课题项目打分系统 - 前端项目说明

## 📋 项目概述

本项目为课题项目打分管理系统前端实现，基于 Vue3 + Vite + Pinia + Element Plus 开发，支持用户角色权限管控、项目管理、打分标准配置、在线打分、数据统计与导出等核心功能，适配超级管理员、管理员、打分用户、普通用户四种角色的业务场景。

后端接口基础路径：`/api/v1`，采用 JWT 令牌认证机制，接口文档可参考后端 API 文档。

## 🖥️ 技术栈

- 构建工具：Vite 5.x

- 前端框架：Vue 3.x（Composition API + Setup 语法糖）

- 状态管理：Pinia

- UI 组件库：Element Plus

- HTTP 请求：Axios

- 路由管理：Vue Router 4.x

- 代码规范：ESLint + Prettier（可选）

## 📂 项目目录结构

```plain text
├── src/
│   ├── pages/         # 按角色分层：admin（管理员）/normal（普通用户/打分用户）/public（公共页面）
│   │   ├── public/    # 所有角色均可访问的公共页面（登录、403、404）
│   │   │   ├── login/
│   │   │   │   └── Login.vue
│   │   │   ├── 403/
│   │   │   │   └── Forbidden.vue
│   │   │   └── 404/
│   │   │       └── NotFound.vue
│   │   ├── admin/     # 仅超级管理员/管理员可访问的页面（用户/项目/统计管理）
│   │   │   ├── user/  # 用户管理模块
│   │   │   │   ├── UserList.vue
│   │   │   │   ├── UserAdd.vue
│   │   │   │   └── UserEdit.vue
│   │   │   ├── project/ # 项目管理模块
│   │   │   │   ├── ProjectList.vue
│   │   │   │   ├── ProjectAdd.vue
│   │   │   │   └── ProjectEdit.vue
│   │   │   └── statistic/ # 数据统计与导出模块
│   │   │       └── StatisticPannel.vue
│   │   └── normal/    # 打分用户/普通用户可访问（仅授权内容，管理员也可访问）
│   │       ├── home/  # 后台首页
│   │       │   └── HomePage.vue
│   │       ├── scoring/ # 打分功能模块
│   │       │   ├── ScoringList.vue # 授权打分项目列表
│   │       │   └── GroupScoring.vue # 小组打分详情页
│   ├── router/
│   │   └── index.js   # 路由配置（核心：权限路由、角色拦截）
│   ├── store/         # Pinia状态管理（用户信息、全局状态）
│   │   ├── modules/
│   │   │   └── userStore.js # 用户信息/登录态管理
│   │   └── index.js
│   ├── utils/
│   │   ├── request.js # 已封装的Axios（之前优化版）
│   │   └── format.js  # 新增：格式化工具（时间/数字）
│   ├── api/           # 接口封装（之前已写user.js，后续补全其他）
│   │   ├── user.js    # 已封装
│   │   ├── project.js # 待开发
│   │   ├── scoring.js # 待开发
│   │   └── statistic.js # 待开发
│   ├── layout/        # 布局组件（后台主布局：侧边栏+头部）
│   │   ├── MainLayout.vue # 核心布局（admin/normal页面共用）
│   │   ├── components/
│   │   │   ├── Sidebar.vue # 侧边栏（按角色渲染菜单）
│   │   │   └── Header.vue  # 头部（退出、用户信息）
│   └── components/    # 全局公共组件
│       ├── common/    # 基础公共组件
│       │   ├── PaginationBar.vue # 分页组件
│       │   ├── SearchInput.vue # 搜索输入框
│       │   └── ConfirmDelete.vue # 删除确认弹窗
│       └── business/  # 业务公共组件
│           ├── ScoringForm.vue # 打分表单（核心业务组件）
│           └── ProjectCard.vue # 项目卡片
```

## 🔧 环境配置

### 1. 环境变量

项目使用环境变量区分开发/生产环境，配置文件位于项目根目录：

#### 开发环境（.env.development）

```env

# 开发环境 API 基础路径（替换为后端实际开发地址）
VITE_API_BASE_URL = 'http://localhost:8080/api/v1'
# 开发环境是否开启调试模式
VITE_DEBUG = true
```

#### 生产环境（.env.production）

```env

# 生产环境 API 基础路径（配合 Nginx 代理，用相对路径）
VITE_API_BASE_URL = '/api/v1'
# 生产环境关闭调试模式
VITE_DEBUG = false
```

### 2. 依赖安装与运行

```bash

# 安装依赖
npm install

# 启动开发服务器（默认端口：5173）
npm run dev

# 打包构建（生成 dist 文件夹，用于部署）
npm run build

# 预览打包结果
npm run preview
```

## 📜 开发规范

### 1. 命名规范

- 文件夹：小写连字符（kebab-case），如 `project-scoring/`

- 变量/函数：小驼峰（camelCase），如 `userList`、`getProjectInfo`

- 组件名：大驼峰（PascalCase），如 `UserForm.vue`、`ProjectTable.vue`，且组件文件名与组件名一致

- 常量：全大写下划线（UPPER_SNAKE_CASE），如 `const PAGE_SIZE = 10`

- 路由命名：小驼峰，与对应页面组件名对应，如 `userList` 对应 `UserList.vue`

### 2. 接口调用规范

- 所有接口统一封装在 `src/api/` 下，按业务模块拆分文件（如用户、项目、打分），禁止在组件内直接写 Axios 请求

- 接口调用必须用 `try/catch` 捕获异常，避免单个接口报错导致页面崩溃

- 登录态失效（401 状态码）由 `utils/request.js` 统一拦截处理，组件无需重复编写

- 接口返回数据需按需解构，避免直接使用 `res` 接收所有数据

### 3. 组件开发规范

- 公共组件（多页面复用）放 `src/components/`，按功能拆分（common/business）

- 页面内私有组件放对应页面文件夹下的 `components/` 子文件夹，如 `pages/user/components/`

- 组件传参用 `props` 定义类型和默认值，禁止直接操作父组件数据；子组件向父组件传值用 `emit`

- 组件内逻辑尽量拆分到函数中，保持 `setup` 语法简洁，避免冗余代码

### 4. 路由与权限规范

- 路由配置统一在 `src/router/index.js` 中，按业务模块分组，添加清晰注释

- 权限路由通过路由元信息（`meta`）定义可访问角色，由路由守卫统一拦截校验

- 未登录用户默认跳转至登录页，无权限用户跳转至 403 页面（可选）

## 🗺️ 路由&权限说明

| 路由路径                  | 对应页面     | 路由名称     | 可访问角色                 | 备注                                 |
| ------------------------- | ------------ | ------------ | -------------------------- | ------------------------------------ |
| /login                    | 登录页       | login        | 所有未登录用户             | 登录成功后跳转至首页                 |
| /                         | 后台首页     | home         | super_admin、admin、scorer | 登录后默认跳转页                     |
| /user                     | 用户管理列表 | userList     | super_admin、admin         | 支持分页、角色筛选                   |
| /user/add                 | 新增用户     | userAdd      | super_admin、admin         | 创建新用户并分配角色                 |
| /user/edit/:id            | 编辑用户     | userEdit     | super_admin、admin         | 修改用户信息、角色、启用状态         |
| /project                  | 项目管理列表 | projectList  | super_admin、admin         | 管理项目周期、关联小组/打分用户      |
| /project/add              | 新增项目     | projectAdd   | super_admin、admin         | 配置项目信息、关联打分标准           |
| /scoring                  | 打分项目列表 | scoringList  | super_admin、admin、scorer | 仅展示当前用户授权的项目             |
| /scoring/group/:projectId | 小组打分页   | groupScoring | super_admin、admin、scorer | 对项目下的小组进行在线打分           |
| /statistic/:projectId     | 打分统计页   | statistic    | super_admin、admin         | 查看单组平均分、指标平均分、打分分布 |
| /403                      | 无权限页面   | forbidden    | 所有用户                   | 无权限访问时跳转                     |

## 🔐 权限控制逻辑

系统基于角色的权限控制（RBAC）模型，核心逻辑如下：

1. 用户登录后，从后端获取`token` 和角色信息，存储在 `localStorage` 和 Pinia 中

2. 路由守卫拦截所有路由跳转，校验用户登录状态和角色权限：
   - 未登录用户：跳转至登录页

   - 已登录但无对应路由权限：跳转至 403 页面

   - 有权限：正常跳转至目标页面

3. 接口请求时，`request.js` 自动携带 `token`，后端校验 `token` 有效性和接口权限

4. 项目打分权限：仅被指定为“可打分用户”的角色，能访问对应项目的打分页面

## 📦 部署说明

1. 执行 `npm run build` 打包生成 `dist` 文件夹

2. 将 `dist` 文件夹部署至 Nginx 服务器，Nginx 配置示例如下：
   `server {
   listen 80;
   server_name your-domain.com; # 你的域名

# 指向 dist 文件夹路径

root /usr/share/nginx/html;
index index.html;

# 前端路由 history 模式兼容

location / {
try_files $uri $uri/ /index.html;
}

# API 反向代理至后端服务

location /api/v1/ {
proxy_pass http://backend-ip:backend-port/api/v1/; # 后端地址
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}
}`

3. 重启 Nginx 服务，访问域名即可正常使用

## ⚠️ 常见问题

- Q：启动项目后，接口请求 401 报错？
  A：检查是否已登录，`token` 是否正确存储，后端服务是否正常运行。

- Q：打包后页面空白，控制台报路由相关错误？
  A：确认 Nginx 配置了 `try_files $uri $uri/ /index.html;`，兼容 Vue Router history 模式。

- Q：接口请求跨域？
  A：开发环境可在 `vite.config.js` 中配置代理；生产环境通过 Nginx 反向代理解决。

- Q：组件内无法获取 `$request`？
  A：确认 `main.js` 已全局挂载，或直接导入 `src/api/` 下的接口模块使用。

## 📌 扩展说明

1. 可补充 ESLint + Prettier 配置，统一代码格式；

2. 可添加全局加载动画、错误页面（404、500）提升用户体验；

3. 可封装 Pinia 模块管理用户信息、全局加载状态等公共数据；

4. 复杂业务场景可添加 Vue I18n 实现多语言适配。
   > （注：文档部分内容可能由 AI 生成）
5. 动态路由？ 可访问的路由从后端接收
6. 单点登录（RefreshToken+token）?
7.
